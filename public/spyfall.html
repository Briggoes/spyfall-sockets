<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spyfall</title>

    <script src="https://cdn.jsdelivr.net/npm/socket.io-client@2/dist/socket.io.js"></script>
</head>

<body>
    <h1>Spyfall</h1>
    <input type="text" value="ID de partida" id="joinMatchInpt"><br>
    <input type="button" value="Unirse a partida" id="joinMatchBtn"><br>
    <input type="button" value="Crear partida" id="createMatchBtn">
    <h3>Como jugar</h3>
    <p>A cada jugador, excepto uno, se le dará un lugar. El jugador que no sepa el lugar, es él espía. Los jugadores se harán preguntas entre si para delatar al espía. Su misión, si decide aceptarla, es pasar desapercibido.</p>

    <script>
        var socket = io('http://localhost:3000')
        socket.on('connect', () => console.log('Connected'))
        socket.on('disconnect', () => console.log('Disconnected'))

        socket.on('event', data => console.log(data))
        socket.on('message', (data) => console.log(data))

        // https://stackoverflow.com/a/57192874
        var params = new URLSearchParams(document.location.search)
        var matchId = params.get('match')
        if (matchId) socket.emit('joinMatch', matchId)

        socket.on('invalidMatch', () => {
            alert('Match doesn\'t exist!')
        })

        var joinMatchInpt = document.getElementById('joinMatchInpt')
        var joinMatchBtn = document.getElementById('joinMatchBtn')
        joinMatchBtn.onclick = () => {
            socket.emit('joinMatch', joinMatchInpt.value)
        }

        var createMatchBtn = document.getElementById('createMatchBtn')
        createMatchBtn.onclick = () => {
            socket.emit('createMatch')
        }

        socket.on('matchCreated', (matchId) => {
            console.log(matchId)
        })
    </script>
</body>

</html>